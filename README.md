# ะะฐะฑะพัะฐัะพัะฝะฐั ัะฐะฑะพัะฐ 7: ะััะธัะตะบัััะฐ, ัะปะพะธ ะธ DDD-lite

## ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ
ะกะธััะตะผะฐ ะพะฟะปะฐัั ะทะฐะบะฐะทะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ DDD-lite ะธ ัะปะพะธััะพะน ะฐััะธัะตะบัััั. ะัะพะตะบั ะดะตะผะพะฝัััะธััะตั ัะฐะทะดะตะปะตะฝะธะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะผะตะถะดั ัะปะพัะผะธ: Domain, Application, Infrastructure ะธ Tests.

## ะััะธัะตะบัััะฐ

### ะกะปะพะธััะฐั ััััะบัััะฐ (Clean Architecture + DDD-lite)
order-payment-system/

โโโ domain/ # ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะธ ะดะพะผะตะฝะฝะฐั ะผะพะดะตะปั

โโโ application/ # Use Cases ะธ ะธะฝัะตััะตะนัั (Ports)

โโโ infrastructure/ # ะะตะฐะปะธะทะฐัะธะธ ะธะฝัะตััะตะนัะพะฒ

โโโ tests/ # ะะพะดัะปัะฝัะต ัะตััั
### ะะพะผะตะฝะฝะฐั ะผะพะดะตะปั (Domain Layer)

#### 1. **Order** (Aggregate Root)
- ะกััะฝะพััั ะทะฐะบะฐะทะฐ ั ะธะฝะฒะฐัะธะฐะฝัะฐะผะธ:
  - โ ะะตะปัะทั ะพะฟะปะฐัะธัั ะฟัััะพะน ะทะฐะบะฐะท
  - โ ะะตะปัะทั ะพะฟะปะฐัะธัั ะทะฐะบะฐะท ะดะฒะฐะถะดั
  - โ ะะพัะปะต ะพะฟะปะฐัั ะฝะตะปัะทั ะธะทะผะตะฝััั ะทะฐะบะฐะท
  - โ ะะฑัะฐั ััะผะผะฐ = ััะผะผะต ัััะพะบ ะทะฐะบะฐะทะฐ

#### 2. **OrderLine** (Entity ะฒะฝัััะธ ะฐะณัะตะณะฐัะฐ)
- ะกััะพะบะฐ ะทะฐะบะฐะทะฐ ั ัะพะฒะฐัะพะผ
- ะกะพะดะตัะถะธั: product_id, product_name, quantity, price

#### 3. **Money** (Value Object)
- ะะตะธะทะผะตะฝัะตะผะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะดะตะฝะตะถะฝัั ััะผะผ
- ะะพะดะดะตัะถะธะฒะฐะตั ะพะฟะตัะฐัะธะธ: +, -, *
- ะัะพะฒะตััะตั ะบะพััะตะบัะฝะพััั ะฒะฐะปััั ะธ ััะผะผั

#### 4. **OrderStatus** (Enum)
- `CREATED` - ัะพะทะดะฐะฝ
- `PAID` - ะพะฟะปะฐัะตะฝ
- `CANCELLED` - ะพัะผะตะฝะตะฝ

### ๐ ะะพััั ะธ ะะดะฐะฟัะตัั (Hexagonal Architecture)

#### ะะพััั (ะะฝัะตััะตะนัั ะฒ Application Layer):
- **`OrderRepository`** - ะธะฝัะตััะตะนั ะดะปั ัะฐะฑะพัั ั ััะฐะฝะธะปะธัะตะผ ะทะฐะบะฐะทะพะฒ
- **`PaymentGateway`** - ะธะฝัะตััะตะนั ะฟะปะฐัะตะถะฝะพะณะพ ัะปัะทะฐ

#### ะะดะฐะฟัะตัั (ะะตะฐะปะธะทะฐัะธะธ ะฒ Infrastructure Layer):
- **`InMemoryOrderRepository`** - in-memory ัะตะฐะปะธะทะฐัะธั ัะตะฟะพะทะธัะพัะธั
- **`FakePaymentGateway`** - ัะตะนะบะพะฒัะน ะฟะปะฐัะตะถะฝัะน ัะปัะท ะดะปั ัะตััะธัะพะฒะฐะฝะธั

### ะกัะตะฝะฐัะธะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั (Application Layer)

#### **`PayOrderUseCase`** - Use Case ะพะฟะปะฐัั ะทะฐะบะฐะทะฐ:
1. ะะฐะณััะถะฐะตั ะทะฐะบะฐะท ัะตัะตะท OrderRepository
2. ะัะฟะพะปะฝัะตั ะดะพะผะตะฝะฝัั ะพะฟะตัะฐัะธั ะพะฟะปะฐัั (ะฟัะพะฒะตัะบะฐ ะธะฝะฒะฐัะธะฐะฝัะพะฒ)
3. ะัะทัะฒะฐะตั ะฟะปะฐัะตะถะฝัะน ัะปัะท ัะตัะตะท PaymentGateway
4. ะกะพััะฐะฝัะตั ะพะฑะฝะพะฒะปะตะฝะฝัะน ะทะฐะบะฐะท
5. ะะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั ะพะฟะปะฐัั

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
order-payment-system/

โโโ src/

โ โโโ domain/

โ โ โโโ init.py

โ โ โโโ money.py # Value Object Money

โ โ โโโ order_status.py # Enum OrderStatus

โ โ โโโ order_line.py # Entity OrderLine

โ โ โโโ order.py # Aggregate Root Order

โ โ

โ โโโ application/
โ โ โโโ init.py
โ โ โโโ use_cases/
โ โ โ โโโ init.py
โ โ โ โโโ pay_order_use_case.py # Use Case
โ โ โโโ ports/
โ โ โโโ init.py
โ โ โโโ order_repository.py # ะะฝัะตััะตะนั
โ โ โโโ payment_gateway.py # ะะฝัะตััะตะนั
โ โ
โ โโโ infrastructure/
โ โโโ init.py
โ โโโ repositories/
โ โ โโโ init.py
โ โ โโโ in_memory_order_repository.py # ะะตะฐะปะธะทะฐัะธั
โ โโโ payment_gateways/
โ โโโ init.py
โ โโโ fake_payment_gateway.py # ะะตะฐะปะธะทะฐัะธั
โ
โโโ tests/
โ โโโ init.py
โ โโโ test_domain.py # ะขะตััั ะดะพะผะตะฝะฐ
โ โโโ test_pay_order_use_case.py # ะขะตััั Use Case
โ
โโโ requirements.txt
โโโ README.md
